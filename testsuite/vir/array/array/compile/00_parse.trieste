vbcc
parse
(top
  {}
  (file
    (group
      (primitive)
      (lbracket)
      (i32)
      (rbracket)
      (globalid 6:@index)
      (globalid 16:@array_i32_index)
      (func)
      (globalid 17:@array_i32_create)
      (lparen)
      (localid 4:$len)
      (:)
      (usize)
      (rparen)
      (:)
      (lbracket)
      (i32)
      (rbracket)
      (localid 2:$a)
      (=)
      (new)
      (lbracket)
      (i32)
      (rbracket)
      (localid 4:$len)
      (ret)
      (localid 2:$a)
      (func)
      (globalid 16:@array_i32_index)
      (lparen)
      (localid 2:$a)
      (:)
      (lbracket)
      (i32)
      (rbracket)
      (,)
      (localid 4:$idx)
      (:)
      (usize)
      (rparen)
      (:)
      (ref)
      (i32)
      (localid 3:$a0)
      (=)
      (ref)
      (localid 2:$a)
      (localid 4:$idx)
      (ret)
      (localid 3:$a0)
      (primitive)
      (ref)
      (i32)
      (globalid 5:@load)
      (globalid 13:@ref_i32_load)
      (globalid 6:@store)
      (globalid 14:@ref_i32_store)
      (func)
      (globalid 13:@ref_i32_load)
      (lparen)
      (localid 2:$a)
      (:)
      (ref)
      (i32)
      (rparen)
      (:)
      (i32)
      (localid 2:$v)
      (=)
      (load)
      (localid 2:$a)
      (ret)
      (localid 2:$v)
      (func)
      (globalid 14:@ref_i32_store)
      (lparen)
      (localid 2:$a)
      (:)
      (ref)
      (i32)
      (,)
      (localid 2:$v)
      (:)
      (i32)
      (rparen)
      (:)
      (i32)
      (localid 5:$prev)
      (=)
      (store)
      (localid 2:$a)
      (localid 2:$v)
      (ret)
      (localid 5:$prev)
      (func)
      (globalid 5:@main)
      (lparen)
      (rparen)
      (:)
      (i32)
      (localid 2:$i)
      (=)
      (const)
      (usize)
      (int 2:10)
      (localid 2:$a)
      (=)
      (stack)
      (lbracket)
      (i32)
      (rbracket)
      (localid 2:$i)
      (localid 2:$b)
      (=)
      (stack)
      (lbracket)
      (i32)
      (rbracket)
      (int 2:10)
      (localid 2:$c)
      (=)
      (call)
      (globalid 17:@array_i32_create)
      (lparen)
      (localid 2:$i)
      (rparen)
      (localid 3:$a0)
      (=)
      (ref)
      (localid 2:$a)
      (int 1:0)
      (localid 4:$idx)
      (=)
      (const)
      (usize)
      (int 1:0)
      (localid 3:$b0)
      (=)
      (ref)
      (localid 2:$b)
      (localid 4:$idx)
      (localid 6:$index)
      (=)
      (lookup)
      (localid 2:$c)
      (globalid 6:@index)
      (localid 3:$c0)
      (=)
      (call)
      (localid 6:$index)
      (lparen)
      (localid 2:$c)
      (,)
      (localid 4:$idx)
      (rparen)
      (localid 2:$j)
      (=)
      (const)
      (i32)
      (int 2:66)
      (localid 2:$0)
      (=)
      (store)
      (localid 3:$a0)
      (localid 2:$j)
      (localid 2:$1)
      (=)
      (store)
      (localid 3:$b0)
      (localid 2:$j)
      (localid 10:$ref_store)
      (=)
      (lookup)
      (localid 3:$c0)
      (globalid 6:@store)
      (localid 2:$2)
      (=)
      (call)
      (localid 10:$ref_store)
      (lparen)
      (localid 3:$c0)
      (,)
      (localid 2:$j)
      (rparen)
      (localid 3:$k0)
      (=)
      (load)
      (localid 3:$a0)
      (localid 3:$k1)
      (=)
      (load)
      (localid 3:$b0)
      (localid 9:$ref_load)
      (=)
      (lookup)
      (localid 3:$c0)
      (globalid 5:@load)
      (localid 3:$k2)
      (=)
      (call)
      (localid 9:$ref_load)
      (lparen)
      (localid 3:$c0)
      (rparen)
      (localid 4:$eq1)
      (=)
      (eq)
      (localid 3:$k0)
      (localid 3:$k1)
      (localid 4:$eq2)
      (=)
      (eq)
      (localid 3:$k1)
      (localid 3:$k2)
      (localid 4:$eq3)
      (=)
      (and)
      (localid 4:$eq1)
      (localid 4:$eq2)
      (cond)
      (localid 4:$eq3)
      (labelid 3:^eq)
      (labelid 3:^ne)
      (labelid 3:^eq)
      (localid 2:$r)
      (=)
      (const)
      (i32)
      (int 1:1)
      (ret)
      (localid 2:$r)
      (labelid 3:^ne)
      (localid 2:$r)
      (=)
      (const)
      (i32)
      (int 2:-1)
      (ret)
      (localid 2:$r))))
