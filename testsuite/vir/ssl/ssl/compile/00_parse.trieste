vbcc
parse
(top
  {}
  (file
    (group
      (lib)
      (globalid 8:@getargv)
      (=)
      (string 7:getargv)
      (lparen)
      (rparen)
      (:)
      (lbracket)
      (lbracket)
      (u8)
      (rbracket)
      (rbracket)
      (globalid 5:@puts)
      (=)
      (string 4:puts)
      (lparen)
      (ptr)
      (rparen)
      (:)
      (i32)
      (globalid 6:@write)
      (=)
      (string 5:write)
      (lparen)
      (i32)
      (,)
      (ptr)
      (,)
      (usize)
      (rparen)
      (:)
      (isize)
      (globalid 15:@happy_eyeballs)
      (=)
      (string 14:happy_eyeballs)
      (lparen)
      (dyn)
      (,)
      (dyn)
      (,)
      (ptr)
      (,)
      (ptr)
      (,)
      (i32)
      (rparen)
      (:)
      (bool)
      (globalid 12:@async_close)
      (=)
      (string 11:async_close)
      (lparen)
      (ptr)
      (rparen)
      (:)
      (none)
      (globalid 14:@async_set_arg)
      (=)
      (string 13:async_set_arg)
      (lparen)
      (ptr)
      (,)
      (dyn)
      (rparen)
      (:)
      (bool)
      (globalid 14:@async_set_cb1)
      (=)
      (string 13:async_set_cb1)
      (lparen)
      (ptr)
      (,)
      (dyn)
      (rparen)
      (:)
      (bool)
      (globalid 10:@async_cb1)
      (=)
      (string 9:async_cb1)
      (lparen)
      (ptr)
      (rparen)
      (:)
      (none)
      (globalid 17:@async_read_start)
      (=)
      (string 16:async_read_start)
      (lparen)
      (ptr)
      (,)
      (dyn)
      (rparen)
      (:)
      (bool)
      (globalid 12:@async_write)
      (=)
      (string 11:async_write)
      (lparen)
      (ptr)
      (,)
      (lbracket)
      (u8)
      (rbracket)
      (rparen)
      (:)
      (none)
      (globalid 12:@uv_strerror)
      (=)
      (string 11:uv_strerror)
      (lparen)
      (i32)
      (rparen)
      (:)
      (ptr)
      (globalid 11:@ssl_client)
      (=)
      (string 10:ssl_client)
      (lparen)
      (ptr)
      (,)
      (ptr)
      (rparen)
      (:)
      (ptr)
      (globalid 10:@ssl_close)
      (=)
      (string 9:ssl_close)
      (lparen)
      (ptr)
      (rparen)
      (:)
      (none)
      (globalid 9:@ssl_read)
      (=)
      (string 8:ssl_read)
      (lparen)
      (ptr)
      (,)
      (lbracket)
      (u8)
      (rbracket)
      (rparen)
      (:)
      (i32)
      (globalid 10:@ssl_write)
      (=)
      (string 9:ssl_write)
      (lparen)
      (ptr)
      (,)
      (lbracket)
      (u8)
      (rbracket)
      (rparen)
      (:)
      (none)
      (globalid 14:@ssl_plaintext)
      (=)
      (string 13:ssl_plaintext)
      (lparen)
      (ptr)
      (rparen)
      (:)
      (lbracket)
      (u8)
      (rbracket)
      (union)
      (none)
      (class)
      (globalid 5:@Conn)
      (globalid 4:@ssl)
      (:)
      (ptr)
      (globalid 4:@cb1)
      (globalid 9:@conn_cb1)
      (globalid 8:@cb_read)
      (globalid 10:@conn_read)
      (func)
      (globalid 9:@conn_cb1)
      (lparen)
      (localid 5:$self)
      (:)
      (globalid 5:@Conn)
      (,)
      (localid 7:$status)
      (:)
      (i32)
      (rparen)
      (:)
      (none)
      (localid 8:$ssl_ref)
      (=)
      (ref)
      (localid 5:$self)
      (globalid 4:@ssl)
      (localid 4:$ssl)
      (=)
      (load)
      (localid 8:$ssl_ref)
      (localid 2:$0)
      (=)
      (ffi)
      (globalid 10:@ssl_close)
      (lparen)
      (localid 4:$ssl)
      (rparen)
      (localid 12:$status_text)
      (=)
      (ffi)
      (globalid 12:@uv_strerror)
      (lparen)
      (localid 7:$status)
      (rparen)
      (localid 2:$1)
      (=)
      (ffi)
      (globalid 5:@puts)
      (lparen)
      (localid 12:$status_text)
      (rparen)
      (localid 5:$none)
      (=)
      (const)
      (none)
      (ret)
      (localid 5:$none)
      (func)
      (globalid 10:@conn_read)
      (lparen)
      (localid 5:$self)
      (:)
      (globalid 5:@Conn)
      (,)
      (localid 5:$data)
      (:)
      (lbracket)
      (u8)
      (rbracket)
      (rparen)
      (:)
      (none)
      (localid 7:$stdout)
      (=)
      (const)
      (i32)
      (int 1:1)
      (localid 8:$ssl_ref)
      (=)
      (ref)
      (localid 5:$self)
      (globalid 4:@ssl)
      (localid 4:$ssl)
      (=)
      (load)
      (localid 8:$ssl_ref)
      (localid 2:$0)
      (=)
      (ffi)
      (globalid 9:@ssl_read)
      (lparen)
      (localid 4:$ssl)
      (,)
      (localid 5:$data)
      (rparen)
      (jump)
      (labelid 6:^while)
      (labelid 6:^while)
      (localid 10:$plaintext)
      (=)
      (ffi)
      (globalid 14:@ssl_plaintext)
      (lparen)
      (localid 4:$ssl)
      (rparen)
      (localid 5:$done)
      (=)
      (typetest)
      (localid 10:$plaintext)
      (none)
      (cond)
      (localid 5:$done)
      (labelid 5:^done)
      (labelid 5:^body)
      (labelid 5:^body)
      (localid 5:$text)
      (=)
      (makeptr)
      (localid 10:$plaintext)
      (localid 4:$len)
      (=)
      (len)
      (localid 10:$plaintext)
      (localid 2:$1)
      (=)
      (ffi)
      (globalid 6:@write)
      (lparen)
      (localid 7:$stdout)
      (,)
      (localid 5:$text)
      (,)
      (localid 4:$len)
      (rparen)
      (jump)
      (labelid 6:^while)
      (labelid 5:^done)
      (localid 5:$none)
      (=)
      (const)
      (none)
      (ret)
      (localid 5:$none)
      (class)
      (globalid 9:@Eyeballs)
      (globalid 5:@host)
      (:)
      (lbracket)
      (u8)
      (rbracket)
      (globalid 3:@cb)
      (globalid 12:@eyeballs_cb)
      (func)
      (globalid 12:@eyeballs_cb)
      (lparen)
      (localid 5:$self)
      (:)
      (globalid 9:@Eyeballs)
      (,)
      (localid 6:$tcp_h)
      (:)
      (ptr)
      (,)
      (localid 7:$status)
      (:)
      (i32)
      (rparen)
      (:)
      (none)
      (localid 5:$zero)
      (=)
      (const)
      (i32)
      (int 1:0)
      (localid 3:$eq)
      (=)
      (eq)
      (localid 7:$status)
      (localid 5:$zero)
      (cond)
      (localid 3:$eq)
      (labelid 8:^success)
      (labelid 8:^failure)
      (labelid 8:^success)
      (localid 9:$host_ref)
      (=)
      (ref)
      (localid 5:$self)
      (globalid 5:@host)
      (localid 5:$host)
      (=)
      (load)
      (localid 9:$host_ref)
      (localid 9:$host_ptr)
      (=)
      (makeptr)
      (localid 5:$host)
      (localid 4:$ssl)
      (=)
      (ffi)
      (globalid 11:@ssl_client)
      (lparen)
      (localid 6:$tcp_h)
      (,)
      (localid 9:$host_ptr)
      (rparen)
      (localid 5:$conn)
      (=)
      (region)
      (rc)
      (globalid 5:@Conn)
      (lparen)
      (localid 4:$ssl)
      (rparen)
      (localid 5:$msg0)
      (=)
      (const)
      (string 24:GET / HTTP/1.1\r\nHost: )
      (localid 5:$msg1)
      (=)
      (const)
      (string 29:\r\nConnection: close\r\n\r\n)
      (localid 2:$0)
      (=)
      (ffi)
      (globalid 10:@ssl_write)
      (lparen)
      (localid 4:$ssl)
      (,)
      (localid 5:$msg0)
      (rparen)
      (localid 2:$1)
      (=)
      (ffi)
      (globalid 10:@ssl_write)
      (lparen)
      (localid 4:$ssl)
      (,)
      (localid 5:$host)
      (rparen)
      (localid 2:$2)
      (=)
      (ffi)
      (globalid 10:@ssl_write)
      (lparen)
      (localid 4:$ssl)
      (,)
      (localid 5:$msg1)
      (rparen)
      (localid 4:$cb1)
      (=)
      (lookup)
      (localid 5:$conn)
      (globalid 4:@cb1)
      (localid 8:$cb_read)
      (=)
      (lookup)
      (localid 5:$conn)
      (globalid 8:@cb_read)
      (localid 2:$3)
      (=)
      (ffi)
      (globalid 14:@async_set_arg)
      (lparen)
      (localid 6:$tcp_h)
      (,)
      (localid 5:$conn)
      (rparen)
      (localid 2:$4)
      (=)
      (ffi)
      (globalid 14:@async_set_cb1)
      (lparen)
      (localid 6:$tcp_h)
      (,)
      (localid 4:$cb1)
      (rparen)
      (localid 2:$5)
      (=)
      (ffi)
      (globalid 17:@async_read_start)
      (lparen)
      (localid 6:$tcp_h)
      (,)
      (localid 8:$cb_read)
      (rparen)
      (jump)
      (labelid 5:^done)
      (labelid 8:^failure)
      (localid 4:$err)
      (=)
      (ffi)
      (globalid 12:@uv_strerror)
      (lparen)
      (localid 7:$status)
      (rparen)
      (localid 2:$6)
      (=)
      (ffi)
      (globalid 5:@puts)
      (lparen)
      (localid 4:$err)
      (rparen)
      (jump)
      (labelid 5:^done)
      (labelid 5:^done)
      (localid 5:$none)
      (=)
      (const)
      (none)
      (ret)
      (localid 5:$none)
      (func)
      (globalid 5:@main)
      (lparen)
      (rparen)
      (:)
      (i32)
      (localid 3:$i0)
      (=)
      (const)
      (usize)
      (int 1:0)
      (localid 3:$i1)
      (=)
      (const)
      (usize)
      (int 1:1)
      (localid 3:$i2)
      (=)
      (const)
      (usize)
      (int 1:2)
      (localid 5:$argv)
      (=)
      (ffi)
      (globalid 8:@getargv)
      (lparen)
      (rparen)
      (localid 9:$arg0_ref)
      (=)
      (ref)
      (localid 5:$argv)
      (localid 3:$i0)
      (localid 9:$arg1_ref)
      (=)
      (ref)
      (localid 5:$argv)
      (localid 3:$i1)
      (localid 5:$host)
      (=)
      (load)
      (localid 9:$arg0_ref)
      (localid 5:$port)
      (=)
      (load)
      (localid 9:$arg1_ref)
      (localid 9:$eyeballs)
      (=)
      (region)
      (rc)
      (globalid 9:@Eyeballs)
      (lparen)
      (localid 5:$host)
      (rparen)
      (localid 3:$cb)
      (=)
      (lookup)
      (localid 9:$eyeballs)
      (globalid 3:@cb)
      (localid 9:$host_ptr)
      (=)
      (makeptr)
      (localid 5:$host)
      (localid 9:$port_ptr)
      (=)
      (makeptr)
      (localid 5:$port)
      (localid 6:$delay)
      (=)
      (const)
      (i32)
      (int 3:100)
      (localid 2:$0)
      (=)
      (ffi)
      (globalid 15:@happy_eyeballs)
      (lparen)
      (localid 9:$eyeballs)
      (,)
      (localid 3:$cb)
      (,)
      (localid 9:$host_ptr)
      (,)
      (localid 9:$port_ptr)
      (,)
      (localid 6:$delay)
      (rparen)
      (localid 4:$ret)
      (=)
      (const)
      (i32)
      (int 1:0)
      (ret)
      (localid 4:$ret))))
