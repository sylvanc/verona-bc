vbcc
parse
(top
  {}
  (file
    (group
      (type)
      (globalid 6:@union)
      (=)
      (i32)
      (union)
      (globalid 4:@Foo)
      (class)
      (globalid 4:@Foo)
      (globalid 2:@a)
      (:)
      (i32)
      (func)
      (globalid 5:@main)
      (lparen)
      (rparen)
      (:)
      (i32)
      (localid 2:$x)
      (=)
      (const)
      (i32)
      (int 2:99)
      (localid 4:$foo)
      (=)
      (stack)
      (globalid 4:@Foo)
      (lparen)
      (localid 2:$x)
      (rparen)
      (localid 4:$ref)
      (=)
      (ref)
      (localid 4:$foo)
      (globalid 2:@a)
      (localid 3:$r0)
      (=)
      (call)
      (globalid 6:@func1)
      (lparen)
      (localid 4:$foo)
      (rparen)
      (localid 3:$r1)
      (=)
      (call)
      (globalid 6:@func1)
      (lparen)
      (localid 2:$x)
      (rparen)
      (localid 3:$r2)
      (=)
      (call)
      (globalid 6:@func2)
      (lparen)
      (localid 4:$ref)
      (rparen)
      (localid 3:$r3)
      (=)
      (eq)
      (localid 3:$r1)
      (localid 3:$r2)
      (cond)
      (localid 3:$r3)
      (labelid 5:^true)
      (labelid 6:^false)
      (labelid 5:^true)
      (ret)
      (localid 3:$r1)
      (labelid 6:^false)
      (ret)
      (localid 3:$r2)
      (func)
      (globalid 6:@func1)
      (lparen)
      (localid 2:$x)
      (:)
      (globalid 6:@union)
      (rparen)
      (:)
      (i32)
      (localid 2:$r)
      (=)
      (const)
      (i32)
      (int 1:1)
      (ret)
      (localid 2:$r)
      (func)
      (globalid 6:@func2)
      (lparen)
      (localid 2:$x)
      (:)
      (ref)
      (i32)
      (rparen)
      (:)
      (i32)
      (localid 2:$y)
      (=)
      (load)
      (localid 2:$x)
      (localid 2:$z)
      (=)
      (typetest)
      (localid 2:$y)
      (i32)
      (cond)
      (localid 2:$z)
      (labelid 5:^true)
      (labelid 6:^false)
      (labelid 5:^true)
      (localid 2:$r)
      (=)
      (const)
      (i32)
      (int 3:100)
      (ret)
      (localid 2:$r)
      (labelid 6:^false)
      (localid 2:$r)
      (=)
      (const)
      (i32)
      (int 1:0)
      (ret)
      (localid 2:$r))))
