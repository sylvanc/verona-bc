vbcc
parse
(top
  {}
  (file
    (group
      (lib)
      (globalid 8:@getargv)
      (=)
      (string 7:getargv)
      (lparen)
      (rparen)
      (:)
      (lbracket)
      (lbracket)
      (u8)
      (rbracket)
      (rbracket)
      (globalid 5:@puts)
      (=)
      (string 4:puts)
      (lparen)
      (ptr)
      (rparen)
      (:)
      (i32)
      (globalid 7:@printf)
      (=)
      (string 6:printf)
      (lparen)
      (ptr)
      (,)
      (vararg)
      (rparen)
      (:)
      (i32)
      (func)
      (globalid 5:@main)
      (lparen)
      (rparen)
      (:)
      (i32)
      (vars)
      (localid 5:$argi)
      (localid 4:$one)
      (=)
      (const)
      (usize)
      (int 1:1)
      (localid 4:$fmt)
      (=)
      (const)
      (string 9:%s (%d)\n)
      (localid 8:$fmt_ptr)
      (=)
      (makeptr)
      (localid 4:$fmt)
      (localid 3:$hi)
      (=)
      (const)
      (string 20:Hello, world! \u26C4)
      (localid 7:$hi_ptr)
      (=)
      (makeptr)
      (localid 3:$hi)
      (localid 2:$0)
      (=)
      (ffi)
      (globalid 7:@printf)
      (lparen)
      (localid 8:$fmt_ptr)
      (,)
      (localid 7:$hi_ptr)
      (,)
      (localid 4:$one)
      (rparen)
      (localid 5:$argv)
      (=)
      (ffi)
      (globalid 8:@getargv)
      (lparen)
      (rparen)
      (localid 5:$argc)
      (=)
      (len)
      (localid 5:$argv)
      (localid 5:$argi)
      (=)
      (const)
      (usize)
      (int 1:0)
      (jump)
      (labelid 5:^cond)
      (labelid 5:^cond)
      (localid 5:$cont)
      (=)
      (lt)
      (localid 5:$argi)
      (localid 5:$argc)
      (cond)
      (localid 5:$cont)
      (labelid 5:^loop)
      (labelid 5:^done)
      (labelid 5:^loop)
      (localid 8:$arg_ref)
      (=)
      (ref)
      (localid 5:$argv)
      (localid 5:$argi)
      (localid 4:$arg)
      (=)
      (load)
      (localid 8:$arg_ref)
      (localid 8:$arg_ptr)
      (=)
      (makeptr)
      (localid 4:$arg)
      (localid 2:$1)
      (=)
      (ffi)
      (globalid 5:@puts)
      (lparen)
      (localid 8:$arg_ptr)
      (rparen)
      (localid 5:$argi)
      (=)
      (add)
      (localid 5:$argi)
      (localid 4:$one)
      (jump)
      (labelid 5:^cond)
      (labelid 5:^done)
      (localid 2:$r)
      (=)
      (const)
      (i32)
      (int 1:0)
      (ret)
      (localid 2:$r))))
